# SensFinder 产品设计文档

## 1. 产品概述

### 1.1 产品名称
SensFinder - 敏感信息自动分类与识别工具

### 1.2 产品定位
SensFinder是一款基于大语言模型(LLM)的自动化工具，用于识别和分类文本中的敏感信息，如人名、地名、公司名和组织名等。该工具旨在帮助企业和个人快速发现潜在的敏感数据，降低数据泄露风险。

### 1.3 核心价值
- 自动化识别：减少人工审查的工作量和错误率
- 多源支持：支持多种LLM服务提供商
- 灵活配置：可根据不同需求调整分类策略和验证规则
- 高效处理：采用多线程并行处理，提高大规模数据处理效率

## 2. 功能需求

### 2.1 数据预处理模块
- **文件读取**：递归读取指定目录下的所有文本文件
- **字段提取**：从文本中提取独立字段
- **数据清洗**：移除无效字段（短长度、纯特殊字符）
- **去重处理**：确保无重复字段
- **批次划分**：将处理后的字段按配置的批次大小分割，便于批量处理

### 2.2 LLM分类模块
- **模型选择**：支持OpenAI、DeepSeek和本地LLM服务
- **提示词模板**：使用预定义的提示词模板引导LLM进行分类
- **批量分类**：并行处理多个批次文件
- **结果格式**：提取字段、分类结果、置信度和判断依据
- **异常处理**：处理API调用失败、超时等异常情况

### 2.3 结果验证模块
- **规则冲突检测**：检测含公司关键词但分类不是"公司名"的字段
- **低置信度检测**：识别置信度低于阈值的分类结果
- **问题汇总**：收集并保存所有检测到的问题字段
- **报告生成**：生成问题字段汇总报告

### 2.4 主控制模块
- **流程协调**：按顺序调用预处理、分类和验证模块
- **状态监控**：显示各阶段处理进度和结果
- **错误处理**：优雅处理中断和异常情况

## 3. 非功能需求

### 3.1 性能要求
- 支持并行处理多个批次文件，充分利用系统资源
- 处理速度取决于LLM服务响应时间和API限制

### 3.2 可扩展性
- 模块化设计，便于添加新的分类类型和验证规则
- 支持多种LLM服务，方便切换和扩展

### 3.3 可用性
- 清晰的配置文件，便于用户根据需求调整参数
- 详细的日志输出，便于故障排查

### 3.4 安全性
- API密钥通过配置文件管理，避免硬编码
- 不存储处理数据，仅输出处理结果

## 4. 数据流程

### 4.1 整体流程
1. 读取原始文本文件中的字段
2. 预处理字段（清洗、去重、分批次）
3. 使用LLM对批次字段进行分类
4. 验证分类结果，识别问题字段
5. 生成最终报告

### 4.2 数据格式
- **输入格式**：文本文件中的字段（每行一个或多个字段，空格分隔）
- **中间格式**：CSV文件，包含字段内容
- **输出格式**：CSV文件，包含字段、分类、置信度、判断依据和问题类型

## 5. 用户场景

### 5.1 数据脱敏前检查
企业在进行数据脱敏前，使用SensFinder快速识别数据中包含的人名、地名、公司名等敏感信息，确保脱敏的完整性。

### 5.2 数据泄露风险评估
组织对内部文档进行扫描，识别并分类潜在的敏感信息，评估数据泄露风险。

### 5.3 合规性检查
企业为满足GDPR、CCPA等数据保护法规要求，使用SensFinder识别需要特殊保护的个人和组织信息。

### 5.4 数据分类管理
协助企业建立数据分类体系，对不同类型的敏感信息进行标签化管理。

## 6. 分类标准定义

### 6.1 分类体系
- **人名**：自然人的完整姓名或常用名，需含姓氏+名字
- **地名**：地理区域名称（国家、城市、州/省、山脉、河流等）
- **公司名及简称**：企业、商业机构的全称或官方简称
- **组织名及简称**：非盈利组织、政府机构、国际组织、协会等
- **未分类**：无法确定类别的字段

### 6.2 置信度评估
使用0-100的数值表示分类结果的可信程度，低于阈值的结果将被标记为需要人工复核。

### 6.3 特殊情况处理
- 对于多义性字段，按最常见含义分类
- 对于无法识别的字段，标记为"未分类"

## 7. 配置项说明

### 7.1 路径配置
- 原始文件路径
- 预处理结果路径
- 分类结果路径
- 问题字段保存路径

### 7.2 预处理参数
- 批次大小
- 最小字段长度

### 7.3 LLM配置
- 当前使用的LLM服务（OpenAI、DeepSeek、本地LLM）
- 模型温度参数
- API密钥和模型信息

### 7.4 验证参数
- 低置信度阈值
- 公司名关键词列表

## 8. 验收标准

### 8.1 功能验收
- 能正确读取和处理不同格式的文本文件
- LLM分类准确率达到预期目标
- 问题字段识别准确，无漏报或误报

### 8.2 性能验收
- 并行处理功能正常工作
- 在指定硬件配置下能够处理规定规模的数据

### 8.3 可用性验收
- 配置文件易于修改和理解
- 日志信息清晰完整，便于排查问题